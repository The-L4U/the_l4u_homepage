<!DOCTYPE html>
<html class="mdc-typography">

<head>
    <title>The L4U</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="node_modules/material-components-web/dist/material-components-web.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h2 class="mdc-typography--display2">The L4U</h2>

    <div class="mdc-card member">
        <section class="mdc-card__media"></section>
        <section class="mdc-card__primary">
            <h1 class="mdc-card__title mdc-card__title--large">L4uName</h1>
            <h2 class="mdc-card__subtitle">L4u task</h2>
        </section>
    </div>

    <div id="membersContainer">
    </div>


    <script>

        const getJSON = (url, callback) => {
            var xhr = new XMLHttpRequest()
            xhr.open('GET', url, true)
            xhr.responseType = 'json'
            xhr.onload = function () {
                var status = xhr.status
                if (status == 200) {
                    callback(null, xhr.response)
                } else {
                    callback(status)
                }
            }
            xhr.send()
        }

        getJSON('php/data.json', (err, data) => {
            if(err) return console.error(data)
            let inner = ''
            data
                .sort((a,b) => a.l4urank > b.l4urank)
                .forEach(member => {
                    inner += ` 
                        <div class="mdc-card member">
                            <section class="mdc-card__media"></section>
                            <section class="mdc-card__primary">
                                <h1 class="mdc-card__title mdc-card__title--large">${member.l4uname}</h1>
                                <h2 class="mdc-card__subtitle">${member.task}</h2>
                            </section>
                        </div>`
                })
            document.getElementById('membersContainer').innerHTML = inner
        })
    </script>
    <script src="node_modules/material-components-web/dist/material-components-web.js"></script>
    <script>
        //Magic happens here for material components.
        //Probably check: https://github.com/material-components/material-components-web
        mdc.autoInit()
    </script>
</body>

</html>